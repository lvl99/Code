<!DOCTYPE html>
<html>
	<head>
		<title>Sticky Demo</title>
		<link type="text/css" rel="stylesheet" href="../css/readme.css" />
		<style type="text/css">
		<!--
			
			.lvl99-sticky {
				width:					250px;
				height:					100px;
				float:					left;
				margin-right:			20px;
				padding:				10px;
				background:				#76707d;
				border-top:				solid 1px #7d7783;
				border-left:			solid 1px #7d7783;
				border-right:			solid 1px #524c59;
				border-bottom:			solid 1px #524c59;
				box-shadow:				0 0 10px rgba(0,0,0,.5);
				border-radius:			10px;
			}
			
			#race {
				position:				relative;
				height:					1000px;
			}
			
			#constrain {
				height:					600px;
			}
			
			#runner-green {
				position:				absolute;
				left:					0;
				top:					0;
				width:					293px;
				height:					270px;
				background:				transparent url('demo/runner-green.png') no-repeat 0 0;
			}
			
			#runner-pink {
				position:				absolute;
				left:					0;
				top:					0;
				width:					293px;
				height:					270px;
				background:				transparent url('demo/runner-pink.png') no-repeat 0 0;
			}
			
			.runner-axis {
				position:				relative;
			}
			
			.frame-1 {
				background-position:	0 0 !important;
			}
			
			.frame-2 {
				background-position:	0 -270px !important;
			}
			
			.frame-3 {
				background-position:	0 -540px !important;
			}
			
			.frame-4 {
				background-position:	0 -810px !important;
			}
			
			#line {
				background:				transparent url('demo/line.png') no-repeat 0 0;
				position:				absolute;
				left:					-100px;
				bottom:					0px;
				width:					831px;
				height:					151px;
				z-index:				9999;
			}
			
			.line-finish {
				background-position:	0 -151px !important;
			}
			
		-->
		</style>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js"></script>
		<script type="text/javascript" src="jquery.lvl99.sticky-0.0.1.js"></script>
		<script type="text/javascript">
			$(document).ready( function() {
			
				function run( runner ) {
					if ( $.data(runner, 'frameNum') == undefined ) {
						$.data(runner, 'frameNum', 0);
						$.data(runner, 'frameCounter', 0);
					}
					$.data(runner, 'frameCounter', $.data(runner, 'frameCounter')+1 );
					if ( $.data(runner, 'frameCounter') >= 12 ) {
						$.data(runner, 'frameNum', $.data(runner, 'frameNum')+1 );
						if ( $.data(runner, 'frameNum') >= 4 ) $.data(runner, 'frameNum', 0);
						$.data(runner, 'frameCounter', 0);
					}
					switch( $.data(runner, 'frameNum') ) {
						case 0: case 2:
							if ( !$(runner).find('.runner').hasClass('frame-1') ) $(runner).find('.runner').removeClass('frame-2 frame-3 frame-4').addClass('frame-1');
							break;
						case 1:
							if ( !$(runner).find('.runner').hasClass('frame-2') ) $(runner).find('.runner').removeClass('frame-1 frame-3 frame-4').addClass('frame-2');
							break;
						case 3:
							if ( !$(runner).find('.runner').hasClass('frame-3') ) $(runner).find('.runner').removeClass('frame-1 frame-2 frame-4').addClass('frame-3');
							break;
					}
				}
				
				$('#normal-sticky').sticky({
					onscroll:		function( stickyElem, elemTop, elemLeft, scrollTop, scrollLeft ) {
						if ( scrollTop < 1246 ) {
							run( stickyElem );
						} else {
							if ( !$(stickyElem).find('.runner').hasClass('frame-4') ) $(stickyElem).find('.runner').removeClass('frame-1 frame-2 frame-3').addClass('frame-4');
							if ( !$('#line').hasClass('line-finish') ) $('#line').addClass('line-finish');
						}
					},
					onscrolltopstart: function( stickyElem ) {
						if ( !$(stickyElem).find('.runner').hasClass('frame-1') ) $(stickyElem).find('.runner').removeClass('frame-2 frame-3 frame-4').addClass('frame-1');
						$('#line').removeClass('line-finish');
					},
					onscrolltopend: function( stickyElem ) {
						if ( !$(stickyElem).find('.runner').hasClass('frame-4') ) $(stickyElem).find('.runner').removeClass('frame-1 frame-2 frame-3').addClass('frame-4');
					}
				});
				
				$('#constrain-sticky').sticky({
					constrainTo:	$('#constrain-sticky').parent(),
					onscroll:		function( stickyElem, elemTop, elemLeft, scrollTop, scrollLeft ) {
						run( stickyElem );
					},
					onscrolltopstart: function( stickyElem ) {
						if ( !$(stickyElem).find('.runner').hasClass('frame-1') ) $(stickyElem).find('.runner').removeClass('frame-2 frame-3 frame-4').addClass('frame-1');
					},
					onscrolltopend: function( stickyElem ) {
						if ( !$(stickyElem).find('.runner').hasClass('frame-4') ) $(stickyElem).find('.runner').removeClass('frame-1 frame-2 frame-3').addClass('frame-4');
					}
				});
				
			});
		</script>
	</head>
	<body>
		
		<div id="top" class="page">
			
			<div class="column column-1">
			
				<hgroup>
					<h1>Sticky</h1>
					<h4>jQuery</h4>
				</hgroup>
				
				<ul id="navigation" class="navigation">
					<li><a href="readme.html">Docs</a></li>
					<li><a href="http://lvl99.com/code">LVL99<span style="color: #f37a9c;">/</span><span style="color: #e3f37a;">CODE</span></a></li>
					<li class="donate">
						<p><strong><big>Like this plugin?</big></strong><br/>
						Donate to show your appreciation and support!</p>
						<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
							<input type="hidden" name="cmd" value="_s-xclick">
							<input type="hidden" name="hosted_button_id" value="XPW9TNXVUBYQL">
							<input type="image" src="https://www.paypalobjects.com/en_AU/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal â€” The safer, easier way to pay online.">
							<img alt="" border="0" src="https://www.paypalobjects.com/en_AU/i/scr/pixel.gif" width="1" height="1">
						</form>
					</li>
				</ul>
				
			</div><!-- /.column-1 -->
			
			<div class="column column-2">
			
				<div class="column-page">
					<p>Sticky allows you flexibility when working with elements you want stuck. In the case of these two examples, the sticky methods allow for extra functionality. For the most part, to stick an element to its position on a page is done like so:</p>
					<code><pre>$('#normal-sticky').sticky();</pre></code>
					<p>Constraining an element to being within a parent is just as easy too:</p>
					<code><pre>$('#constrain-sticky').sticky({
	constrainTo:	'parent'
});</pre></code>
					<p>In the case of this demo I've actually used the custom Sticky events to provide interaction with the stuck element and others at certain points of the scroll using the <span class="code">onscroll</span>, <span class="code">onscrolltopstart</span> and <span class="code">onscrolltopend</span> methods.</p>
				</div>
				
				<div id="race">
					<div id="normal-sticky" class="lvl99-sticky">
						<h2>Normal Sticky Element</h2>
						<div class="runner-axis"><!-- position:relative -->
							<div id="runner-green" class="runner"></div><!-- position:absolute -->
						</div>
					</div>
					
					<div id="constrain">
						<div id="constrain-sticky" class="lvl99-sticky">
							<h2>Constrained Sticky Element</h2>
							<div class="runner-axis"><!-- position:relative -->
								<div id="runner-pink" class="runner"></div><!-- position:absolute -->
							</div>
						</div>
					</div>
					
					<div id="line"></div>
				</div>
				
				<div class="column-page">
					<p>Something more here!</p>
				</div>
				
			</div><!-- /.column-2 -->
			
			<!--<div class="column column-page" style="margin-left: 200px; width: 230px; padding: 10px;">
				<code><pre>$('#normal-sticky').sticky();</pre></code>
			</div>
			
			<div class="column column-page" style="margin-left: 20px; width: 230px; padding: 10px;">
				<code><pre>$('#constrain-sticky').sticky({
  constrainTo: 'parent'
});</pre></code>
			</div>-->
			
		</div><!-- /.page -->
		
	</body>
</html>